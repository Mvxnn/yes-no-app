<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#121212">
    <title>YES / NO</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Header -->
    <header id="top-bar">
        <div class="header-left">
            <button id="shop-btn" aria-label="Boutique">
                <div class="energy-indicator">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="energy-icon">
                        <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" fill="currentColor" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span id="energy-count">10</span>
                    <span id="home-regen-timer" class="hidden">--:--</span>
                </div>
            </button> <!-- Shop Trigger -->
        </div>
        <div class="header-right">
            <button id="lang-btn" aria-label="Changer de langue">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="2" y1="12" x2="22" y2="12"></line>
                    <path
                        d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                    </path>
                </svg>
                <span id="lang-indicator" style="font-size: 0.7rem; font-weight: 700; margin-left: 4px;">FR</span>
            </button>

            <div class="divider-vertical"></div>

            <button id="history-btn" aria-label="Historique">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
                </svg>
            </button>
        </div>
    </header>

    <main id="app-container">
        <!-- Zone de Saisie Centrale -->
        <div id="center-stage">
            <div class="input-container">
                <textarea id="question-input" placeholder="Posez votre question..." autocomplete="off"
                    rows="1"></textarea>
                <button id="explicit-send-btn" aria-label="Ask Oracle">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Le Switch de Résultat (Footer/Bottom) -->
        <div id="bottom-control">
            <div id="oracle-switch" class="switch-container">
                <div class="switch-side side-yes" data-value="YES">YES</div>
                <div class="divider"></div>
                <div class="switch-side side-no" data-value="NO">NO</div>

                <!-- Effet de Scan/Lumière qui se balade -->
                <div class="scan-line"></div>
            </div>

            <p class="instruction-hint" id="hint-text">Appuyez sur Entrée pour décider</p>
        </div>
    </main>

    <!-- Modal Historique -->
    <div id="history-modal" class="hidden" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-handle"></div> <!-- Handle for sheet look -->
            <div class="modal-header">
                <h2 id="modal-title">Historique</h2>
                <button id="close-history-btn" aria-label="Fermer">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
            <div id="history-list-container">
                <!-- Les items seront injectés ici par JS -->
                <p class="empty-state" id="empty-history-msg">Aucune question pour le moment.</p>
            </div>
            <div class="modal-footer">
                <button id="clear-history-btn">Effacer tout</button>
            </div>
        </div>
    </div>

    <!-- Modal Boutique -->
    <div id="shop-modal" class="hidden" aria-hidden="true">
        <div class="modal-content shop-content">
            <div class="modal-header">
                <h2>Boutique Oracle</h2>
                <button id="close-shop-btn" aria-label="Fermer">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 6L6 18M6 6L18 18" />
                    </svg>
                </button>
            </div>

            <div class="shop-body">
                <div class="shop-hero">
                    <div class="current-balance">
                        <span id="shop-balance">10</span>
                        <small>Jetons</small>
                    </div>
                    <div id="next-regen-timer" class="regen-timer">
                        <small>Prochaine recharge dans</small>
                        <span id="timer-display">--:--</span>
                    </div>
                </div>

                <div class="products-list">
                    <!-- Produit 1: Refill -->
                    <div class="product-card" id="prod-refill">
                        <div class="prod-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="24" viewBox="0 0 24 24"
                                fill="#fff">
                                <g clip-path="url(#clip0_4418_8344)">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM15.53 13.23L10.35 16.82C9.59 17.35 9.15 17.04 9.37 16.15L10.32 12.31L8.67 11.9C7.92 11.72 7.83 11.2 8.46 10.76L13.64 7.17C14.4 6.64 14.84 6.95 14.62 7.84L13.67 11.68L15.32 12.09C16.07 12.28 16.16 12.79 15.53 13.23Z"
                                        fill="white" style="fill: var(--fillg);" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_4418_8344">
                                        <rect width="32" height="32" fill="white" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                        <div class="prod-info">
                            <h3>Recharge Rapide</h3>
                            <p>+50 Jetons instantanés</p>
                        </div>
                        <button class="buy-btn" data-id="energy_refill_50">0,99 €</button>
                    </div>

                    <!-- Produit 2: Premium -->
                    <div class="product-card premium" id="prod-premium">
                        <div class="prod-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none">
                                <g clip-path="url(#clip0_4418_6233)">
                                    <path
                                        d="M10.1802 9.31921C9.36024 8.18921 8.05025 7.44922 6.54025 7.44922C4.03025 7.44922 1.99023 9.48921 1.99023 11.9992C1.99023 14.5092 4.03025 16.5492 6.54025 16.5492C8.23025 16.5492 9.80026 15.6592 10.6703 14.2092L12.0002 11.9992L13.3203 9.78918C14.1903 8.33918 15.7603 7.44922 17.4503 7.44922C19.9603 7.44922 22.0002 9.48921 22.0002 11.9992C22.0002 14.5092 19.9603 16.5492 17.4503 16.5492C15.9503 16.5492 14.6402 15.8092 13.8102 14.6792"
                                        stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_4418_6233">
                                        <rect width="24" height="24" fill="white" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                        <div class="prod-info">
                            <h3>Pass Illimité</h3>
                            <p>Énergie infinie à vie</p>
                        </div>
                        <button class="buy-btn" data-id="premium_unlock_lifetime">4,99 €</button>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="restore-btn" class="text-link">Restaurer les achats</button>
            </div>
        </div>
    </div>

    <!-- Modal Alerte Énergie -->
    <div id="energy-alert-modal" class="hidden" aria-hidden="true">
        <div class="modal-content energy-alert-content">
            <div class="energy-alert-header">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" class="energy-alert-icon">
                    <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" fill="#FDD835" stroke="#FDD835" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </div>
            <div class="energy-alert-body">
                <h3 id="energy-alert-title">L'Oracle est fatigué</h3>
                <p id="energy-alert-message">Vous n'avez plus d'énergie. Ouvrir la boutique pour recharger ?</p>
            </div>
            <div class="energy-alert-actions">
                <button id="energy-alert-cancel" class="energy-btn energy-btn-secondary">Annuler</button>
                <button id="energy-alert-confirm" class="energy-btn energy-btn-primary">Ouvrir la boutique</button>
            </div>
        </div>
    </div>

    <!-- Modal Achat Réussi -->
    <div id="purchase-success-modal" class="hidden" aria-hidden="true">
        <div class="modal-content purchase-success-content">
            <div class="purchase-success-header">
                <div class="success-checkmark">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" class="success-icon">
                        <circle cx="12" cy="12" r="10" stroke="#34C759" stroke-width="2" fill="rgba(52,199,89,0.15)" />
                        <path d="M8 12.5L11 15.5L16 9" stroke="#34C759" stroke-width="2.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </div>
            </div>
            <div class="purchase-success-body">
                <h3 id="purchase-success-title">Achat réussi !</h3>
                <p id="purchase-success-message">Votre achat a bien été effectué.</p>
            </div>
            <div class="purchase-success-actions">
                <button id="purchase-success-ok" class="energy-btn energy-btn-success">Super !</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>